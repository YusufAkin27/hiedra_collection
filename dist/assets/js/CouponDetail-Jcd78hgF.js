import{e,u as s,r as i,j as a}from"./react-vendor-2SZXphvN.js";import{a as l}from"./context-DXDbei_0.js";import{L as n}from"./LazyImage-CYh-si_0.js";import{L as t}from"./index-DRjqN31K.js";import{S as r}from"./SEO-CLq8vwqd.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const o=()=>{const{id:o}=e(),c=s(),[d,u]=i.useState(null),[h,x]=i.useState(!0),[m,p]=i.useState(""),[j,v]=i.useState(!1),{accessToken:g}=l();i.useEffect(()=>{k()},[o,g]);const k=async()=>{try{x(!0),p("");const e={"Content-Type":"application/json"};g&&(e.Authorization="Bearer "+g);const s=await fetch("https://api.yusufakin.com.tr/api/coupons",{headers:e}),i=await s.json();if(s.ok&&(i.isSuccess||i.success)){const e=(i.data||[]).find(e=>e.id===parseInt(o));e?u(e):p("Kupon bulunamadı")}else p(i.message||"Kupon yüklenemedi")}catch(e){p("Kupon yüklenirken bir hata oluştu")}finally{x(!1)}},y=e=>e?new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}):"";if(h)return a.jsxs("div",{className:"coupon-detail-container",children:[a.jsx(r,{title:"Kupon Detayı | Hiedra Perde",description:"Kupon detaylarını görüntüleyin.",url:"/kupon/"+o}),a.jsx(t,{size:"large",text:"Kupon yükleniyor...",variant:"page"})]});if(m||!d)return a.jsxs("div",{className:"coupon-detail-container",children:[a.jsx(r,{title:"Kupon Bulunamadı | Hiedra Perde",description:"Kupon bulunamadı.",url:"/kupon/"+o}),a.jsxs("div",{className:"error-state",children:[a.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),a.jsx("h2",{children:m||"Kupon bulunamadı"}),a.jsx("button",{className:"back-btn",onClick:()=>c("/kuponlar"),children:"Kuponlara Dön"})]})]});const N=(e=>{if(!e)return null;const s=Math.ceil((new Date(e)-new Date)/864e5);return s>0?s:0})(d.validUntil),w=null!==N&&7>=N&&N>0,f=!0===d.isPersonal;d.maxUsageCount>0&&(d.maxUsageCount,d.currentUsageCount);const b=d.maxUsageCount>0;return d.maxUsageCount>0&&(d.currentUsageCount,d.maxUsageCount),a.jsxs("div",{className:"coupon-detail-container",children:[a.jsx(r,{title:d.name+" - Kupon Detayı | Hiedra Perde",description:d.description||"Özel indirim kuponu: "+d.name,url:"/kupon/"+o}),a.jsxs("button",{className:"back-to-coupons-btn",onClick:()=>c("/kuponlar"),children:[a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Kuponlara Dön"]}),a.jsxs("div",{className:"coupon-detail-card",children:[d.coverImageUrl&&a.jsxs("div",{className:"coupon-detail-cover",children:[a.jsx(n,{src:d.coverImageUrl,alt:d.name}),f&&a.jsxs("div",{className:"personal-badge-detail",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Size Özel"})]})]}),a.jsxs("div",{className:"coupon-detail-header",children:[a.jsxs("div",{className:"coupon-detail-discount",children:[a.jsx("span",{className:"discount-value-large",children:(C=d,"YUZDE"===C.type?"%"+C.discountValue:"SABIT_TUTAR"===C.type?C.discountValue+" ₺":""+C.discountValue)}),a.jsx("span",{className:"discount-label-large",children:"İndirim"})]}),a.jsxs("div",{className:"coupon-detail-badges",children:[w&&a.jsxs("div",{className:"expiring-badge-detail",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),a.jsxs("span",{children:["Yakında bitiyor (",N," gün kaldı)"]})]}),b&&a.jsxs("div",{className:"limited-usage-badge-detail",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),a.jsx("span",{children:"Sınırlı Kullanım"})]})]})]}),a.jsxs("div",{className:"coupon-detail-body",children:[a.jsx("h1",{className:"coupon-detail-name",children:d.name}),d.description&&a.jsx("p",{className:"coupon-detail-description",children:d.description}),a.jsxs("div",{className:"coupon-detail-code-section",children:[a.jsx("label",{className:"coupon-code-label-detail",children:"Kupon Kodu"}),a.jsxs("div",{className:"coupon-code-detail",children:[a.jsx("span",{className:"code-text-detail",children:d.code}),a.jsx("button",{className:"copy-btn-detail",onClick:()=>{return e=d.code,void navigator.clipboard.writeText(e).then(()=>{v(!0),setTimeout(()=>v(!1),2e3)});var e},title:"Kopyala",children:j?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),j&&a.jsx("div",{className:"copy-success-detail",children:"Kupon kodu kopyalandı!"})]}),a.jsxs("div",{className:"coupon-detail-info",children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("h3",{className:"detail-section-title",children:"Geçerlilik Tarihleri"}),a.jsxs("div",{className:"detail-item-detail",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),a.jsxs("div",{className:"detail-content-detail",children:[a.jsx("span",{className:"detail-label-detail",children:"Başlangıç:"}),a.jsx("span",{className:"detail-value-detail",children:y(d.validFrom)})]})]}),a.jsxs("div",{className:"detail-item-detail",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),a.jsxs("div",{className:"detail-content-detail",children:[a.jsx("span",{className:"detail-label-detail",children:"Bitiş:"}),a.jsx("span",{className:"detail-value-detail",children:y(d.validUntil)}),null!==N&&N>0&&a.jsxs("span",{className:"remaining-days-detail",children:["(",N," gün kaldı)"]})]})]})]}),d.minimumPurchaseAmount&&a.jsxs("div",{className:"detail-section",children:[a.jsx("h3",{className:"detail-section-title",children:"Kullanım Koşulları"}),a.jsxs("div",{className:"detail-item-detail",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),a.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),a.jsxs("div",{className:"detail-content-detail",children:[a.jsx("span",{className:"detail-label-detail",children:"Minimum Alışveriş Tutarı:"}),a.jsxs("span",{className:"detail-value-detail",children:[parseFloat(d.minimumPurchaseAmount).toFixed(2)," ₺"]})]})]})]})]}),a.jsx("div",{className:"coupon-detail-actions",children:a.jsxs("button",{className:"use-coupon-btn-detail",onClick:()=>c("/cart"),children:[a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 2L7 6m6-4l2 4M3 8h18l-1 8H4L3 8z"}),a.jsx("circle",{cx:"7",cy:"20",r:"2"}),a.jsx("circle",{cx:"17",cy:"20",r:"2"})]}),"Sepete Git ve Kullan"]})})]})]})]});var C};export{o as default};
