import{u as e,r as s,j as a,L as i}from"./react-vendor-2SZXphvN.js";import{a as r}from"./context-Ch8ZyfUe.js";import{u as l}from"./index-h050gNYs.js";import{S as d}from"./SEO-CLq8vwqd.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const t="https://eticaret-5aic.onrender.com/api",n=()=>{const{isAuthenticated:n,accessToken:o}=r(),c=e(),m=l(),[h,u]=s.useState({fullName:"",phone:"",addressLine:"",addressDetail:"",city:"",district:"",isDefault:!1}),[p,j]=s.useState(!1),[x,f]=s.useState(""),[v,y]=s.useState(!1);s.useEffect(()=>{n||c("/giris",{state:{from:"/adres-ekle"}})},[n,c]),s.useEffect(()=>{n&&o&&!v&&N()},[n,o,v]);const N=async()=>{try{const e=await fetch(t+"/user/profile",{headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();if(s.success&&s.data){const e=s.data;(e.fullName||e.phone)&&u(s=>({...s,fullName:e.fullName||s.fullName,phone:e.phone||s.phone})),y(!0)}}}catch(e){y(!0)}},k=e=>{const{name:s,value:a,type:i,checked:r}=e.target;u(e=>({...e,[s]:"checkbox"===i?r:a}))};return n?a.jsxs("div",{className:"add-address-page",children:[a.jsx(d,{title:"Yeni Adres Ekle - Hiedra Home Collection",description:"Yeni teslimat adresi ekleyin",url:"/adres-ekle"}),a.jsxs("div",{className:"add-address-container",children:[a.jsxs("div",{className:"add-address-header",children:[a.jsxs(i,{to:"/adreslerim",className:"back-link",children:[a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})}),"Adreslerime Dön"]}),a.jsx("h1",{children:"Yeni Adres Ekle"}),a.jsx("p",{className:"page-subtitle",children:"Teslimat için yeni bir adres ekleyin"})]}),x&&a.jsx("div",{className:"alert alert-error",children:x}),a.jsx("div",{className:"add-address-form-wrapper",children:a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),f(""),j(!0);try{const e=await fetch(t+"/user/addresses",{method:"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"},body:JSON.stringify({...h})}),s=await e.json();e.ok&&(s.isSuccess||s.success)?(m.success("Adres başarıyla eklendi."),c("/adreslerim")):f(s.message||"Adres eklenemedi")}catch(s){f("Adres eklenirken bir hata oluştu")}finally{j(!1)}},className:"add-address-form",children:[a.jsxs("div",{className:"form-section",children:[a.jsx("h2",{className:"form-section-title",children:"Kişi Bilgileri"}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"fullName",children:"Ad Soyad *"}),a.jsx("input",{type:"text",id:"fullName",name:"fullName",value:h.fullName,onChange:k,required:!0,placeholder:"Adınız ve soyadınız"}),a.jsx("p",{className:"form-hint",children:"Kişisel bilgilerinizi kontrol edin"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"phone",children:"Telefon *"}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:h.phone,onChange:k,required:!0,placeholder:"05XX XXX XX XX"})]})]})]}),a.jsxs("div",{className:"form-section",children:[a.jsx("h2",{className:"form-section-title",children:"Adres Bilgileri"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"addressLine",children:"Sokak / Cadde / Bina No *"}),a.jsx("input",{type:"text",id:"addressLine",name:"addressLine",value:h.addressLine,onChange:k,required:!0,placeholder:"Sokak, cadde ve bina numarası"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"addressDetail",children:"Adres Detayı"}),a.jsx("input",{type:"text",id:"addressDetail",name:"addressDetail",value:h.addressDetail,onChange:k,placeholder:"Daire, kat, blok vb. (opsiyonel)"})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"city",children:"İl *"}),a.jsx("input",{type:"text",id:"city",name:"city",value:h.city,onChange:k,required:!0,placeholder:"İl adı"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"district",children:"İlçe *"}),a.jsx("input",{type:"text",id:"district",name:"district",value:h.district,onChange:k,required:!0,placeholder:"İlçe adı"})]})]})]}),a.jsx("div",{className:"form-section",children:a.jsx("div",{className:"form-group checkbox-group",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",name:"isDefault",checked:h.isDefault,onChange:k}),a.jsx("span",{children:"Varsayılan adres olarak ayarla"})]})})}),a.jsxs("div",{className:"form-actions",children:[a.jsx(i,{to:"/adreslerim",className:"btn-cancel",children:"İptal"}),a.jsx("button",{type:"submit",className:"btn-submit",disabled:p,children:p?"Kaydediliyor...":"Adresi Kaydet"})]})]})})]})]}):null};export{n as default};
