import{u as e,r,j as s}from"./react-vendor-2SZXphvN.js";import{a as i}from"./context-DXDbei_0.js";import{S as a}from"./SEO-CLq8vwqd.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const t="https://api.yusufakin.com.tr/",n=t+"api/orders",o=t+"api/shipping",l=t+"api/reviews",d=()=>{const{isAuthenticated:d}=i(),c=e(),[m,u]=r.useState(""),[h,p]=r.useState(""),[g,x]=r.useState(""),[j,b]=r.useState(!1),[y,f]=r.useState(null),[k,v]=r.useState(""),[N,w]=r.useState(!1),[S,C]=r.useState(!1),[z,E]=r.useState(!1),[D,T]=r.useState("M√º≈üteri isteƒüi"),[I,A]=r.useState("ƒ∞ade talebi"),[L,R]=r.useState(!1),[P,B]=r.useState({show:!1,message:"",type:"success"}),[F,W]=r.useState(null),[U,O]=r.useState(!1),[q,$]=r.useState([]),[G,K]=r.useState(""),[M,Y]=r.useState(""),[H,V]=r.useState("request"),[_,X]=r.useState(!1),[J,Q]=r.useState(!1),[Z,ee]=r.useState(null),[re,se]=r.useState(null),[ie,ae]=r.useState(0),[te,ne]=r.useState(""),[oe,le]=r.useState([]),[de,ce]=r.useState([]),[me,ue]=r.useState(!1),[he,pe]=r.useState({}),[ge,xe]=r.useState(!1),je=r.useRef(null),be=()=>{const e={"Content-Type":"application/json"};return M&&(e["X-Order-Lookup-Token"]=M),e};r.useEffect(()=>{d&&c("/siparislerim")},[d,c]);const ye=(e,r="success")=>{B({show:!0,message:e,type:r}),setTimeout(()=>{B({show:!1,message:"",type:"success"})},4e3)},[fe,ke]=r.useState({fullName:"",phone:"",addressLine:"",addressDetail:"",city:"",district:""}),[ve,Ne]=r.useState(!1),[we,Se]=r.useState({customerName:"",customerPhone:""}),Ce=()=>{let e="";for(let r=0;5>r;r++)e+="ABCDEFGHJKLMNPQRSTUVWXYZ23456789".charAt(Math.floor(32*Math.random()));return e};r.useEffect(()=>{p(Ce())},[]);const ze=()=>{p(Ce()),x(""),je.current&&je.current.focus()},Ee=async e=>{if(e&&e.preventDefault&&e.preventDefault(),m.trim()&&m.includes("@")?g.trim()?g.toUpperCase()===h.toUpperCase()||(ye("G√ºvenlik kodu hatalƒ±! L√ºtfen tekrar deneyiniz.","error"),ze(),0):(ye("L√ºtfen g√ºvenlik kodunu giriniz.","error"),0):(ye("L√ºtfen ge√ßerli bir e-posta adresi giriniz.","error"),0)){X(!0),v("");try{const e=await fetch(n+"/lookup/request-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m.trim()})}),r=await e.json();if(!(r.success??r.isSuccess??e.ok))throw Error(r.message||"Doƒürulama kodu g√∂nderilemedi.");ye("Doƒürulama kodu e-posta adresinize g√∂nderildi.","success"),K(""),Y(""),$([]),f(null),ee(null),V("verify")}catch(r){v(r.message||"Doƒürulama kodu g√∂nderilemedi."),ye(r.message||"Doƒürulama kodu g√∂nderilemedi.","error")}finally{X(!1)}}},De=async e=>{const r="string"==typeof e?e:e?.orderNumber;r&&await Te(r)},Te=async(e,r)=>{if(!e)return;const s=M;if(s){b(!0),v("");try{const r=await fetch(`${n}/lookup/${e}?token=${encodeURIComponent(s)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await r.json();if(!r.ok||!(i.success??i.isSuccess))throw Error(i.message||"Sipari≈ü bulunamadƒ±");const a=i.data;if(!a)throw Error("Sipari≈ü bulunamadƒ±");f({...a,shippingAddress:a.addresses&&a.addresses.length>0?a.addresses[0]:{}});const t=a.addresses&&a.addresses.length>0?a.addresses[0]:{};ke({fullName:a.customerName||"",phone:a.customerPhone||"",addressLine:t.addressLine||"",addressDetail:t.addressDetail||"",city:t.city||"",district:t.district||""}),Se({customerName:a.customerName||"",customerPhone:a.customerPhone||""}),ee(a.orderNumber),w(!1),C(!1),E(!1),V("detail"),a.trackingNumber?Ie(a.orderNumber,m.trim()):W(null),"DELIVERED"!==a.status&&"TESLIM_EDILDI"!==a.status||!a.orderItems||Le(a.orderItems)}catch(i){v(i.message||"Sipari≈ü detaylarƒ± alƒ±nƒ±rken bir hata olu≈ütu")}finally{b(!1)}}else ye("L√ºtfen √∂nce doƒürulama i≈ülemini tamamlayƒ±n.","error")},Ie=async(e,r)=>{if(e&&r)try{O(!0);const s=new URL(o+"/track-by-order");s.searchParams.append("orderNumber",e),s.searchParams.append("email",r);const i=await fetch(s.toString(),{method:"GET",headers:{"Content-Type":"application/json"}}),a=await i.json();a.isSuccess||a.success?W(a.data):W(null)}catch(s){W(null)}finally{O(!1)}},Ae=e=>{if(!e)return"";try{return new Date(e).toLocaleString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}},Le=async e=>{if(!e||!e.length)return void pe({});const r={},s=new Set;for(const a of e)a.productId&&s.add(a.productId);const i=Array.from(s).map(async e=>{try{const r=be(),s=await fetch(`${l}/product/${e}/has-reviewed`,{headers:r});if(s.ok){const r=await s.json();if(r.isSuccess&&!0===r.data)return{productId:e,hasReviewed:!0}}}catch(r){}return{productId:e,hasReviewed:!1}});(await Promise.all(i)).forEach(({productId:e,hasReviewed:s})=>{s&&(r[e]=!0)}),pe(r)},Re=()=>{se(null),ae(0),ne(""),le([]),ce([])},Pe=()=>{u(""),x(""),f(null),$([]),v(""),w(!1),C(!1),E(!1),W(null),Y(""),K(""),ee(null),se(null),pe({}),V("request"),ze()},Be=e=>{ke({...fe,[e.target.name]:e.target.value})},Fe=()=>{if(!y||!y.status)return!1;const e=y.status.toUpperCase();return"SHIPPED"===e||"DELIVERED"===e},We=()=>{if(!y||!y.status)return!1;const e=y.status.toUpperCase();return"PAID"===e||"PROCESSING"===e};r.useEffect(()=>{!We()&&N&&w(!1)},[y]);const Ue=e=>e?{PENDING:"Beklemede",PAID:"√ñdendi",PROCESSING:"Hazƒ±rlanƒ±yor",SHIPPED:"Kargoya Verildi",DELIVERED:"Teslim Edildi",CANCELLED:"ƒ∞ptal Edildi",REFUNDED:"ƒ∞ade Edildi"}[e.toUpperCase()]||e:"Bilinmiyor",Oe={"@context":"https://schema.org","@type":"WebPage",name:"Sipari≈ü Sorgula - Perde Satƒ±≈ü Sipari≈ü Takibi",description:"Perde satƒ±≈ü sipari≈ü durumu sorgulama sayfasƒ±. Sipari≈ü numaranƒ±z ile sipari≈üinizin durumunu takip edin.",url:"undefined"!=typeof window?window.location.href:"https://hiedra.com/siparis-sorgula"},qe=e=>{if(!e)return"/images/perde1kapak.jpg";let r=e.productImageUrl||e.coverImageUrl||"/images/perde1kapak.jpg";return r&&""!==r&&"null"!==r&&"undefined"!==r||(r="/images/perde1kapak.jpg"),r.startsWith("http")||r.startsWith("/")||(r="/"+r),r};return s.jsxs("div",{className:"order-lookup-container",children:[s.jsx(a,{title:"Sipari≈ü Sorgula - Perde Satƒ±≈ü Sipari≈ü Takibi | Hiedra Perde",description:"Perde satƒ±≈ü sipari≈ü sorgulama sayfasƒ±. Sipari≈üinizin durumunu √∂ƒürenmek i√ßin sipari≈ü numaranƒ±zƒ± ve e-posta adresinizi giriniz. Hiedra Perde sipari≈ü takip sistemi.",keywords:"sipari≈ü sorgula, sipari≈ü takip, perde satƒ±≈ü sipari≈ü sorgulama, sipari≈ü durumu, kargo takip, perde sipari≈ü takibi",url:"/siparis-sorgula",structuredData:Oe}),s.jsxs("header",{className:"lookup-header",children:[s.jsx("h1",{children:"Sipari≈ü Sorgula - Perde Satƒ±≈ü Sipari≈ü Takibi"}),s.jsx("p",{children:"Perde satƒ±≈ü sipari≈üinizin durumunu takip etmek i√ßin bilgilerinizi giriniz"})]}),"request"===H&&s.jsxs("div",{className:"lookup-form-container",children:[k&&s.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:k}),s.jsxs("form",{className:"lookup-form",onSubmit:Ee,children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{htmlFor:"email",children:["E-posta Adresi ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"email",id:"email",value:m,onChange:e=>u(e.target.value),placeholder:"siparis@email.com",required:!0}),s.jsx("p",{className:"form-hint",children:"Sipari≈ü verdiƒüiniz e-posta adresini giriniz"})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{htmlFor:"captcha",children:["G√ºvenlik Kodu ",s.jsx("span",{className:"required",children:"*"})]}),s.jsxs("div",{className:"captcha-container",children:[s.jsxs("div",{className:"captcha-display",onClick:ze,children:[s.jsx("span",{className:"captcha-text",children:h}),s.jsx("button",{type:"button",className:"captcha-refresh",onClick:e=>{e.preventDefault(),ze()},title:"Yenile",children:s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("polyline",{points:"23 4 23 10 17 10"}),s.jsx("polyline",{points:"1 20 1 14 7 14"}),s.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})})]}),s.jsx("input",{ref:je,type:"text",id:"captcha",value:g,onChange:e=>x(e.target.value.toUpperCase()),placeholder:"Yukarƒ±daki kodu giriniz",required:!0,maxLength:"5",className:"captcha-input"})]}),s.jsx("p",{className:"form-hint",children:"Yukarƒ±daki kodu giriniz (b√ºy√ºk/k√º√ß√ºk harf duyarsƒ±z)"})]}),s.jsx("button",{type:"submit",className:"lookup-btn",disabled:_,children:_?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Kod G√∂nderiliyor..."]}):"Doƒürulama Kodunu G√∂nder"})]})]}),"verify"===H&&s.jsxs("div",{className:"lookup-form-container",children:[k&&s.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:k}),s.jsxs("div",{className:"verification-info",children:[s.jsx("h3",{children:"Kodunuzu Girin"}),s.jsxs("p",{children:[m," adresine g√∂nderdiƒüimiz 6 haneli kodu girerek sipari≈ülerinizi g√∂r√ºnt√ºleyebilirsiniz."]})]}),s.jsxs("form",{className:"lookup-form",onSubmit:async e=>{if(e&&e.preventDefault&&e.preventDefault(),G.trim()){Q(!0),v("");try{const e=await fetch(n+"/lookup/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m.trim(),code:G.trim()})}),r=await e.json();if(!(r.success??r.isSuccess??e.ok)||!r.data?.lookupToken)throw Error(r.message||"Doƒürulama ba≈üarƒ±sƒ±z.");const s=r.data.lookupToken;Y(s),ye("Doƒürulama ba≈üarƒ±lƒ±. Sipari≈üleriniz y√ºkleniyor...","success"),await(async e=>{const r=e||M;if(r){b(!0),v(""),$([]);try{const e=await fetch(`${n}/lookup?token=${encodeURIComponent(r)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),s=await e.json();if(!(s.success??s.isSuccess??e.ok))throw Error(s.message||"Sipari≈üler alƒ±namadƒ±.");$(s.data||[]),V("list"),f(null),ee(null),w(!1),C(!1),E(!1)}catch(s){v(s.message||"Sipari≈üler alƒ±nƒ±rken bir hata olu≈ütu."),ye(s.message||"Sipari≈üler alƒ±nƒ±rken bir hata olu≈ütu.","error")}finally{b(!1)}}})(s)}catch(r){v(r.message||"Doƒürulama ba≈üarƒ±sƒ±z oldu."),ye(r.message||"Doƒürulama ba≈üarƒ±sƒ±z oldu.","error")}finally{Q(!1)}}else ye("L√ºtfen e-posta adresinize gelen doƒürulama kodunu giriniz.","error")},children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{htmlFor:"verificationCode",children:["Doƒürulama Kodu ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",id:"verificationCode",value:G,onChange:e=>K(e.target.value.toUpperCase()),placeholder:"√ñrn: 123456",required:!0,maxLength:"6"}),s.jsx("p",{className:"form-hint",children:"Kod gelmediyse birka√ß dakika bekleyip tekrar g√∂nderebilirsiniz."})]}),s.jsx("button",{type:"submit",className:"lookup-btn",disabled:J,children:J?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Doƒürulanƒ±yor..."]}):"Kodumu Doƒürula"})]}),s.jsx("button",{className:"link-button",type:"button",onClick:async()=>{await Ee()},disabled:_,children:"Kod gelmedi mi? Tekrar g√∂nder"})]}),"list"===H&&s.jsxs("div",{className:"order-list-container",children:[k&&s.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:k}),s.jsxs("div",{className:"order-list-header",children:[s.jsx("div",{children:s.jsxs("h3",{children:[m," adresine ait sipari≈üler"]})}),s.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:s.jsx("button",{className:"new-lookup-btn",onClick:Pe,children:"‚Üê Yeni E-posta ile Sorgula"})})]}),0===q.length?s.jsx("div",{className:"empty-orders",children:s.jsx("p",{children:"Bu e-posta ile ili≈ükili sipari≈ü bulunamadƒ±."})}):s.jsx("div",{className:"order-list",children:q.map(e=>{const r=e.orderItems&&e.orderItems[0];return s.jsxs("div",{className:"order-card",onClick:()=>De(e.orderNumber),role:"button",tabIndex:0,onKeyDown:r=>{"Enter"!==r.key&&" "!==r.key||(r.preventDefault(),De(e.orderNumber))},children:[r&&s.jsx("div",{className:"order-card-image",children:s.jsx("img",{src:qe(r),alt:r.productName||"Sipari≈ü √ºr√ºn√º",loading:"lazy"})}),s.jsxs("div",{className:"order-card-content",children:[s.jsxs("div",{className:"order-card-header",children:[s.jsxs("h4",{children:["Sipari≈ü No: ",e.orderNumber]}),s.jsx("span",{className:"status-badge "+(e.status||"").toLowerCase().replace(/\s+/g,"-"),children:Ue(e.status)})]}),s.jsxs("div",{className:"order-card-body",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Tarih:"})," ",e.createdAt?new Date(e.createdAt).toLocaleDateString("tr-TR"):"-"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Toplam:"})," ",e.totalAmount?parseFloat(e.totalAmount).toFixed(2):"0.00"," ‚Ç∫"]}),r&&s.jsxs("p",{children:[s.jsx("strong",{children:"√úr√ºn:"})," ",r.productName||"N/A"]}),e.orderItems&&e.orderItems.length>1&&s.jsxs("p",{className:"order-item-count",children:["+",e.orderItems.length-1," √ºr√ºn daha"]})]}),s.jsx("div",{className:"order-card-footer",children:s.jsx("span",{className:"order-card-arrow",children:"Detayƒ± G√∂r ‚Üí"})})]})]},e.orderNumber)})})]}),"detail"===H&&y&&s.jsxs("div",{className:"order-details-container",children:[k&&s.jsx("div",{className:"error-message",style:{padding:"1rem",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #fcc"},children:k}),s.jsxs("div",{className:"order-header-actions",children:[s.jsxs("div",{className:"action-buttons",style:{gap:"0.5rem",flexWrap:"wrap"},children:[s.jsx("button",{onClick:Pe,className:"new-lookup-btn",children:"‚Üê Yeni E-posta ile Sorgula"}),M&&s.jsx("button",{onClick:()=>{f(null),w(!1),C(!1),E(!1),W(null),V("list")},className:"new-lookup-btn",children:"‚Üê Sipari≈ü Listesine D√∂n"})]}),s.jsxs("div",{className:"action-buttons",children:[(()=>{if(!y||!y.status)return!1;const e=y.status.toUpperCase();return"PENDING"===e||"PAID"===e||"PROCESSING"===e})()&&s.jsx("button",{onClick:()=>C(!0),className:"cancel-btn",disabled:L,children:"Sipari≈üi ƒ∞ptal Et"}),Fe()&&s.jsx("button",{onClick:()=>E(!0),className:"refund-btn",disabled:L,children:"ƒ∞ade Talep Et"})]})]}),s.jsx("div",{className:"order-status-card",children:s.jsxs("div",{className:"status-header",children:[s.jsxs("div",{className:"status-info",children:[s.jsxs("h3",{children:["Sipari≈ü No: ",y.orderNumber]}),s.jsx("span",{className:"status-badge "+(y.status||"").toLowerCase().replace(/\s+/g,"-"),children:Ue(y.status)})]}),s.jsxs("div",{className:"order-date",children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),y.createdAt?new Date(y.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Tarih bilgisi yok"]})]})}),s.jsxs("div",{className:"order-section",children:[s.jsx("h3",{children:"Sipari≈ü Detaylarƒ±"}),s.jsx("div",{className:"order-items",children:y.orderItems&&y.orderItems.length>0?y.orderItems.map((e,r)=>{const i=("DELIVERED"===y.status||"TESLIM_EDILDI"===y.status)&&e.productId,a=he[e.productId]||!1;return s.jsxs("div",{className:"order-item",children:[s.jsx("div",{className:"item-image",children:s.jsx("img",{src:qe(e),alt:e.productName||"Sipari≈ü √ºr√ºn√º",loading:"lazy"})}),s.jsxs("div",{className:"item-info",children:[s.jsx("h4",{children:e.productName||"√úr√ºn"}),s.jsxs("div",{className:"item-customizations",children:[e.width&&s.jsxs("span",{children:["En: ",e.width," cm"]}),e.height&&s.jsxs("span",{children:["Boy: ",e.height," cm"]}),e.pleatType&&s.jsxs("span",{children:["Pile: ","pilesiz"===e.pleatType?"Pilesiz":e.pleatType]})]}),s.jsxs("span",{className:"item-quantity",children:["Adet: ",e.quantity||1]}),i&&s.jsx("div",{className:"item-review-section",children:a?s.jsx("span",{className:"review-status reviewed",children:"‚úì Yorumunuz yapƒ±ldƒ±"}):s.jsx("button",{type:"button",className:"review-btn",onClick:r=>{var s,i,a;r.stopPropagation(),s=e.productId,i=e.productName,a=qe(e),he[s]?ye("Bu √ºr√ºne zaten yorum yaptƒ±nƒ±z. Her √ºr√ºne sadece bir kez yorum yapabilirsiniz.","error"):(se({productId:s,productName:i,productImage:a}),ae(0),ne(""),le([]),ce([]),v(""))},children:"Yorum Yap"})})]})]},r)}):s.jsx("p",{children:"Sipari≈ü detayƒ± bulunamadƒ±"})}),Fe()&&s.jsx("button",{type:"button",className:"inline-refund-btn",onClick:()=>E(!0),children:"Bu √úr√ºn ƒ∞√ßin ƒ∞ade Talebi Olu≈ütur"}),s.jsxs("div",{className:"order-total",children:[s.jsx("span",{children:"Toplam:"}),s.jsxs("span",{children:[y.totalAmount?parseFloat(y.totalAmount).toFixed(2):"0.00"," ‚Ç∫"]})]})]}),s.jsxs("div",{className:"order-section invoice-section-lookup",children:[s.jsx("div",{className:"order-section-header",children:s.jsx("h3",{children:"üìÑ Fatura ƒ∞≈ülemleri"})}),s.jsx("p",{className:"invoice-description",children:"Sipari≈üinizin faturasƒ±nƒ± g√∂r√ºnt√ºleyebilir veya e-posta adresinize g√∂nderebilirsiniz."}),s.jsxs("div",{className:"invoice-buttons-lookup",children:[s.jsxs("button",{onClick:()=>(async e=>{try{const r=await fetch(`${t}api/invoices/order/${e}/view`);if(!r.ok){if(404===r.status)return void ye("Bu sipari≈ü i√ßin hen√ºz fatura olu≈üturulmamƒ±≈ü.","error");throw Error("Fatura g√∂r√ºnt√ºlenemedi")}const s=await r.blob(),i=window.URL.createObjectURL(s);window.open(i,"_blank")}catch(r){ye("Fatura g√∂r√ºnt√ºlenirken bir hata olu≈ütu.","error")}})(y.orderNumber),className:"invoice-btn-lookup invoice-btn-view-lookup",type:"button",children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),s.jsx("span",{children:"Faturayƒ± G√∂r√ºnt√ºle"})]}),s.jsx("button",{onClick:()=>(async e=>{xe(!0);try{const r=await fetch(`${t}api/invoices/order/${e}/send-email`,{method:"POST",headers:{"Content-Type":"application/json"}}),s=await r.json();if(!r.ok||!s.isSuccess&&!s.success)throw Error(s.message||"Fatura g√∂nderilemedi");ye("Fatura e-posta adresinize g√∂nderildi!","success")}catch(r){ye(r.message||"Fatura g√∂nderilirken bir hata olu≈ütu.","error")}finally{xe(!1)}})(y.orderNumber),disabled:ge,className:"invoice-btn-lookup invoice-btn-email-lookup",type:"button",children:ge?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"spinner-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),s.jsx("span",{children:"G√∂nderiliyor..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),s.jsx("polyline",{points:"22,6 12,13 2,6"})]}),s.jsx("span",{children:"E-posta ile G√∂nder"})]})})]})]}),s.jsxs("div",{className:"order-section",children:[s.jsxs("div",{className:"order-section-header",children:[s.jsx("h3",{children:"Teslimat Adresi"}),We()&&s.jsx("button",{type:"button",className:"update-address-inline-btn",onClick:()=>w(!N),children:N?"ƒ∞ptal":"Adresi G√ºncelle"})]}),!N&&s.jsxs("div",{className:"address-details",children:[y.shippingAddress&&s.jsxs(s.Fragment,{children:[y.shippingAddress.addressLine&&s.jsx("p",{children:y.shippingAddress.addressLine}),y.shippingAddress.addressDetail&&s.jsx("p",{children:y.shippingAddress.addressDetail}),(y.shippingAddress.district||y.shippingAddress.city)&&s.jsxs("p",{children:[y.shippingAddress.district||""," ",y.shippingAddress.district&&y.shippingAddress.city?"/":""," ",y.shippingAddress.city||""]})]}),(!y.shippingAddress||!y.shippingAddress.addressLine&&!y.shippingAddress.city)&&s.jsx("p",{children:"Adres bilgisi bulunamadƒ±"})]}),N&&We()&&s.jsxs("div",{className:"address-form-inline",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["Ad Soyad ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",name:"fullName",value:fe.fullName,onChange:Be,required:!0})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["Telefon ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",name:"phone",value:fe.phone,onChange:Be,required:!0})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["Adres Satƒ±rƒ± ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",name:"addressLine",value:fe.addressLine,onChange:Be,required:!0})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Adres Detayƒ±"}),s.jsx("input",{type:"text",name:"addressDetail",value:fe.addressDetail,onChange:Be})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["≈ûehir ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",name:"city",value:fe.city,onChange:Be,required:!0})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["ƒ∞l√ße ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{type:"text",name:"district",value:fe.district,onChange:Be,required:!0})]}),s.jsx("button",{onClick:async()=>{if(fe.fullName&&fe.phone&&fe.addressLine&&fe.city&&fe.district){R(!0),v("");try{const e=await fetch(`${n}/${y.orderNumber}/address?email=${encodeURIComponent(m)}`,{method:"PUT",headers:be(),body:JSON.stringify({orderNumber:y.orderNumber,fullName:fe.fullName,phone:fe.phone,addressLine:fe.addressLine,addressDetail:fe.addressDetail||"",city:fe.city,district:fe.district})});let r;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanƒ±t formatƒ±");if(r=await e.json(),!e.ok)throw Error(r.message||"Adres g√ºncellenemedi");r.success&&(ye("Adres ba≈üarƒ±yla g√ºncellendi!","success"),w(!1),await Te(y.orderNumber))}catch(e){v(e.message||"Adres g√ºncellenirken bir hata olu≈ütu")}finally{R(!1)}}else ye("L√ºtfen t√ºm zorunlu alanlarƒ± doldurunuz.","error")},className:"lookup-btn",disabled:L,children:L?"G√ºncelleniyor...":"Adresi G√ºncelle"})]})]}),y.cancelReason&&s.jsxs("div",{className:"order-section",children:[s.jsx("h3",{children:"ƒ∞ptal Bilgisi"}),s.jsxs("div",{className:"address-details",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Sebep:"})," ",y.cancelReason]}),y.cancelledAt&&s.jsxs("p",{children:[s.jsx("strong",{children:"ƒ∞ptal Tarihi:"})," ",new Date(y.cancelledAt).toLocaleDateString("tr-TR")]})]})]}),y.refundedAt&&s.jsxs("div",{className:"order-section",children:[s.jsx("h3",{children:"ƒ∞ade Bilgisi"}),s.jsx("div",{className:"address-details",children:s.jsxs("p",{children:[s.jsx("strong",{children:"ƒ∞ade Tarihi:"})," ",new Date(y.refundedAt).toLocaleDateString("tr-TR")]})})]}),s.jsxs("div",{className:"order-section",children:[s.jsxs("div",{className:"section-header-with-action",children:[s.jsx("h3",{children:"M√º≈üteri Bilgileri"}),We()&&!ve&&s.jsxs("button",{onClick:()=>Ne(!0),className:"edit-btn",type:"button",children:[s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"D√ºzenle"]})]}),ve?s.jsxs("div",{className:"customer-form-container",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{htmlFor:"customer-name-lookup",children:["Ad Soyad ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{id:"customer-name-lookup",type:"text",name:"customerName",value:we.customerName,onChange:handleCustomerChange,required:!0,className:"form-input"})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{htmlFor:"customer-phone-lookup",children:["Telefon ",s.jsx("span",{className:"required",children:"*"})]}),s.jsx("input",{id:"customer-phone-lookup",type:"text",name:"customerPhone",value:we.customerPhone,onChange:handleCustomerChange,required:!0,className:"form-input",placeholder:"√ñrn: +905551234567"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"customer-email-lookup",children:"E-posta"}),s.jsx("input",{id:"customer-email-lookup",type:"email",value:y.customerEmail||"",disabled:!0,className:"form-input disabled"}),s.jsx("small",{className:"form-hint",children:"E-posta adresi deƒüi≈ütirilemez"})]}),s.jsxs("div",{className:"form-actions",children:[s.jsx("button",{onClick:()=>{Ne(!1),Se({customerName:y.customerName||"",customerPhone:y.customerPhone||""})},className:"cancel-btn",type:"button",disabled:L,children:"ƒ∞ptal"}),s.jsx("button",{onClick:async()=>{if(we.customerName&&we.customerPhone){R(!0),v("");try{const e=await fetch(`${n}/${y.orderNumber}/address?email=${encodeURIComponent(m)}`,{method:"PUT",headers:be(),body:JSON.stringify({orderNumber:y.orderNumber,fullName:we.customerName,phone:we.customerPhone,addressLine:fe.addressLine||y.shippingAddress?.addressLine||"",addressDetail:fe.addressDetail||y.shippingAddress?.addressDetail||"",city:fe.city||y.shippingAddress?.city||"",district:fe.district||y.shippingAddress?.district||""})});if(!e.ok){const r=await e.json().catch(()=>({}));throw Error(r.message||"Bilgiler g√ºncellenemedi")}{const r=await e.json();if(!r.success&&!r.isSuccess)throw Error(r.message||"Bilgiler g√ºncellenemedi");ye("Bilgiler ba≈üarƒ±yla g√ºncellendi!","success"),Ne(!1),await Te(y.orderNumber)}}catch(e){v(e.message||"Bilgiler g√ºncellenirken bir hata olu≈ütu"),ye(e.message||"Bilgiler g√ºncellenirken bir hata olu≈ütu","error")}finally{R(!1)}}else ye("L√ºtfen t√ºm zorunlu alanlarƒ± doldurunuz.","error")},className:"save-btn",type:"button",disabled:L,children:L?"Kaydediliyor...":"Kaydet"})]})]}):s.jsxs("div",{className:"customer-details",children:[y.customerName&&s.jsxs("p",{children:[s.jsx("strong",{children:"Ad Soyad:"})," ",y.customerName]}),y.customerEmail&&s.jsxs("p",{children:[s.jsx("strong",{children:"E-posta:"})," ",y.customerEmail]}),y.customerPhone&&s.jsxs("p",{children:[s.jsx("strong",{children:"Telefon:"})," ",y.customerPhone]})]})]}),y.trackingNumber&&s.jsxs("div",{className:"order-section tracking-section",style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",border:"1px solid #e0e0e0"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[s.jsx("h3",{style:{margin:0},children:"üì¶ Kargo Takip Bilgileri"}),s.jsx("button",{onClick:()=>Ie(y.orderNumber,m),disabled:U,style:{padding:"0.5rem 1rem",background:U?"#ccc":"#667eea",color:"white",border:"none",borderRadius:"4px",cursor:U?"not-allowed":"pointer",fontSize:"0.9rem",opacity:U?.6:1},children:U?"Y√ºkleniyor...":"üîÑ G√ºncelle"})]}),s.jsxs("div",{style:{marginBottom:"1rem"},children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Takip Numarasƒ±:"})," ",y.trackingNumber]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Kargo Firmasƒ±:"})," ",y.carrier||"DHL"]}),y.shippedAt&&s.jsxs("p",{children:[s.jsx("strong",{children:"Kargoya Verilme:"})," ",new Date(y.shippedAt).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),U?s.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:s.jsx("p",{children:"Kargo bilgileri y√ºkleniyor..."})}):F?s.jsxs("div",{children:[s.jsxs("div",{style:{marginBottom:"1rem"},children:[s.jsx("div",{style:{display:"inline-block",padding:"0.5rem 1rem",borderRadius:"6px",fontSize:"0.95rem",fontWeight:"600",backgroundColor:"DELIVERED"===F.status?"#d4edda":"IN_TRANSIT"===F.status?"#d1ecf1":"EXCEPTION"===F.status?"#f8d7da":"#fff3cd",color:"DELIVERED"===F.status?"#155724":"IN_TRANSIT"===F.status?"#0c5460":"EXCEPTION"===F.status?"#721c24":"#856404"},children:($e=F.status,$e?{IN_TRANSIT:"Kargoda",DELIVERED:"Teslim Edildi",EXCEPTION:"Sorun Var",PENDING:"Beklemede",PICKED_UP:"Kargo Alƒ±ndƒ±",OUT_FOR_DELIVERY:"Teslimat ƒ∞√ßin Yola √áƒ±ktƒ±"}[$e.toUpperCase()]||$e:"Bilinmiyor")}),F.statusDescription&&s.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#64748b"},children:F.statusDescription})]}),F.events&&F.events.length>0&&s.jsxs("div",{style:{marginTop:"1rem"},children:[s.jsx("h4",{style:{marginBottom:"0.75rem",fontSize:"1rem"},children:"Kargo Hareketleri"}),s.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto"},children:[F.events.slice(0,5).map((e,r)=>s.jsxs("div",{style:{padding:"0.75rem",marginBottom:"0.5rem",background:"white",borderRadius:"6px",borderLeft:"4px solid #667eea",fontSize:"0.9rem"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem",color:"#333"},children:Ae(e.timestamp)}),e.location&&s.jsxs("div",{style:{color:"#64748b",marginBottom:"0.25rem"},children:["üìç ",e.location]}),e.description&&s.jsx("div",{style:{color:"#333"},children:e.description})]},r)),F.events.length>5&&s.jsxs("p",{style:{textAlign:"center",color:"#64748b",fontSize:"0.85rem",marginTop:"0.5rem"},children:["+",F.events.length-5," hareket daha"]})]})]}),s.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:s.jsx("a",{href:`/kargo-takip?trackingNumber=${y.trackingNumber}&orderNumber=${y.orderNumber}`,style:{display:"inline-block",padding:"0.75rem 1.5rem",background:"#667eea",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"0.9rem",fontWeight:"600"},children:"‚Üí Detaylƒ± Takip Bilgisi"})})]}):s.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b"},children:s.jsx("p",{children:'Kargo takip bilgisi hen√ºz g√ºncellenmedi. "G√ºncelle" butonuna tƒ±klayarak en g√ºncel bilgileri alabilirsiniz.'})})]}),S&&s.jsx("div",{className:"modal-overlay",onClick:()=>!L&&C(!1),children:s.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[s.jsx("h3",{children:"Sipari≈üi ƒ∞ptal Et"}),s.jsx("p",{children:"Sipari≈üinizi iptal etmek istediƒüinizden emin misiniz?"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"ƒ∞ptal Sebebi"}),s.jsx("textarea",{value:D,onChange:e=>T(e.target.value),rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)"}})]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:()=>C(!1),disabled:L,children:"ƒ∞ptal"}),s.jsx("button",{onClick:async()=>{R(!0),v("");try{const e=await fetch(`${n}/${y.orderNumber}/cancel?email=${encodeURIComponent(m)}&reason=${encodeURIComponent(D)}`,{method:"POST",headers:be()});let r;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanƒ±t formatƒ±");if(r=await e.json(),!e.ok)throw Error(r.message||"Sipari≈ü iptal edilemedi");r.success&&(ye("Sipari≈ü iptal talebiniz alƒ±ndƒ±!","success"),C(!1),await Te(y.orderNumber))}catch(e){v(e.message||"Sipari≈ü iptal edilirken bir hata olu≈ütu")}finally{R(!1)}},disabled:L,className:"confirm-btn",children:L?"ƒ∞≈üleniyor...":"Onayla"})]})]})}),z&&s.jsx("div",{className:"modal-overlay",onClick:()=>!L&&E(!1),children:s.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[s.jsx("h3",{children:"ƒ∞ade Talebi Olu≈ütur"}),s.jsx("p",{children:"ƒ∞ade talebi olu≈üturmak istediƒüinizden emin misiniz?"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"ƒ∞ade Sebebi"}),s.jsx("textarea",{value:I,onChange:e=>A(e.target.value),rows:"3",style:{width:"100%",padding:"0.5rem",borderRadius:"8px",border:"1px solid var(--border-color)"}})]}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:()=>E(!1),disabled:L,children:"ƒ∞ptal"}),s.jsx("button",{onClick:async()=>{R(!0),v("");try{const e=await fetch(`${n}/${y.orderNumber}/refund?email=${encodeURIComponent(m)}&reason=${encodeURIComponent(I)}`,{method:"POST",headers:be()});let r;if(!(e.headers.get("content-type")||"").includes("application/json"))throw await e.text(),Error("Beklenmeyen yanƒ±t formatƒ±");if(r=await e.json(),!e.ok)throw Error(r.message||"ƒ∞ade talebi olu≈üturulamadƒ±");r.success&&(ye("ƒ∞ade talebiniz alƒ±ndƒ±!","success"),E(!1),await Te(y.orderNumber))}catch(e){v(e.message||"ƒ∞ade talebi olu≈üturulurken bir hata olu≈ütu")}finally{R(!1)}},disabled:L,className:"confirm-btn",children:L?"ƒ∞≈üleniyor...":"Onayla"})]})]})})]}),P.show&&s.jsxs("div",{className:"toast-notification toast-"+P.type,children:[s.jsxs("div",{className:"toast-content",children:["success"===P.type&&s.jsxs("svg",{className:"toast-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),s.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"error"===P.type&&s.jsxs("svg",{className:"toast-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),s.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),s.jsx("span",{className:"toast-message",children:P.message})]}),s.jsx("button",{className:"toast-close",onClick:()=>B({show:!1,message:"",type:"success"}),"aria-label":"Kapat",children:s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),re&&s.jsx("div",{className:"modal-overlay",onClick:Re,children:s.jsxs("div",{className:"modal-content review-modal",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[s.jsx("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:"700",color:"#1f2937"},children:"Yorum Yap"}),s.jsx("button",{onClick:Re,disabled:me,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="#f3f4f6",onMouseLeave:e=>e.currentTarget.style.background="none",children:s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),k&&s.jsx("div",{style:{padding:"0.75rem",background:"#fee",color:"#c33",borderRadius:"6px",marginBottom:"1rem",fontSize:"0.875rem"},children:k}),s.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[re.productImage&&s.jsx("img",{src:re.productImage,alt:re.productName,style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"1px solid #e5e7eb"}}),s.jsxs("div",{style:{flex:1},children:[s.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",fontWeight:"600",color:"#1f2937"},children:re.productName}),s.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280"},children:"√úr√ºn hakkƒ±ndaki d√º≈ü√ºncelerinizi payla≈üƒ±n"})]})]}),s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsxs("label",{style:{display:"block",marginBottom:"1rem",fontWeight:"600",fontSize:"0.9375rem",color:"#374151"},children:["Puanƒ±nƒ±z ",s.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-start",alignItems:"center",padding:"1rem",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[[1,2,3,4,5].map(e=>s.jsx("button",{type:"button",onClick:()=>ae(e),style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",transition:"transform 0.15s",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.1)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:e>ie?"none":"#fbbf24",stroke:e>ie?"#d1d5db":"#f59e0b",strokeWidth:"1.5",style:{transition:"all 0.2s"},children:s.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},e)),ie>0&&s.jsx("span",{style:{marginLeft:"1rem",fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:5===ie?"M√ºkemmel":4===ie?"√áok ƒ∞yi":3===ie?"ƒ∞yi":2===ie?"Orta":"K√∂t√º"})]})]}),s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"0.9375rem",color:"#374151"},children:"Yorumunuz"}),s.jsx("textarea",{value:te,onChange:e=>ne(e.target.value),rows:"6",style:{width:"100%",padding:"0.875rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical",transition:"all 0.2s",lineHeight:"1.5",color:"#1f2937",background:"#ffffff",boxSizing:"border-box"},placeholder:"√úr√ºn hakkƒ±ndaki d√º≈ü√ºncelerinizi payla≈üƒ±n...",maxLength:2e3}),s.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:te.length>1900?"#ef4444":"#9ca3af",textAlign:"right",fontWeight:te.length>1900?"600":"400"},children:[te.length,"/2000 karakter"]})]}),s.jsxs("div",{style:{marginBottom:"2rem"},children:[s.jsxs("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"0.9375rem",color:"#374151"},children:["Fotoƒüraflar ",s.jsx("span",{style:{fontWeight:"400",color:"#9ca3af",fontSize:"0.8125rem"},children:"(Opsiyonel, en fazla 5)"})]}),s.jsxs("div",{style:{border:"1px dashed #d1d5db",borderRadius:"8px",padding:"1rem",textAlign:"center",background:"#f9fafb",transition:"all 0.2s",marginBottom:"1rem"},children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const r=Array.from(e.target.files);if(r.length+oe.length>5)return void ye("En fazla 5 g√∂rsel y√ºkleyebilirsiniz","error");const s=[...oe,...r];le(s);const i=[];r.forEach(e=>{const r=new FileReader;r.onload=e=>{i.push(e.target.result),i.length===s.length&&ce(i)},r.readAsDataURL(e)})},disabled:oe.length>=5,style:{width:"100%",padding:"0.625rem",border:"1px solid #d1d5db",borderRadius:"6px",background:5>oe.length?"white":"#f3f4f6",cursor:5>oe.length?"pointer":"not-allowed",fontSize:"0.8125rem",color:"#374151"}}),oe.length>=5&&s.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.75rem",color:"#ef4444"},children:"Maksimum 5 fotoƒüraf y√ºkleyebilirsiniz"})]}),de.length>0&&s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"0.75rem"},children:de.map((e,r)=>s.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"1px solid #e5e7eb"},children:[s.jsx("img",{src:e,alt:"Preview "+(r+1),style:{width:"100%",height:"100px",objectFit:"cover",display:"block"}}),s.jsx("button",{type:"button",onClick:()=>(e=>{const r=oe.filter((r,s)=>s!==e),s=de.filter((r,s)=>s!==e);le(r),ce(s)})(r),style:{position:"absolute",top:"0.25rem",right:"0.25rem",background:"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"√ó"})]},r))})]}),s.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",paddingTop:"1.5rem",borderTop:"1px solid #e5e7eb"},children:[s.jsx("button",{onClick:Re,disabled:me,style:{padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"0.875rem"},children:"ƒ∞ptal"}),s.jsx("button",{onClick:async()=>{if(re&&ie&&ie>=1&&5>=ie){if(he[re.productId])return ye("Bu √ºr√ºne zaten yorum yaptƒ±nƒ±z. Her √ºr√ºne sadece bir kez yorum yapabilirsiniz.","error"),void Re();ue(!0),v("");try{const e=new FormData;e.append("productId",re.productId.toString()),e.append("rating",ie.toString()),te.trim()&&e.append("comment",te.trim()),oe.forEach(r=>{e.append("images",r)});const r={};M&&(r["X-Order-Lookup-Token"]=M);const s=await fetch(l+"/create",{method:"POST",headers:r,body:e}),i=await s.json();if(!s.ok||!(i.success??i.isSuccess))throw Error(i.message||"Yorum g√∂nderilemedi");ye("Yorumunuz ba≈üarƒ±yla g√∂nderildi!","success"),Re(),pe(e=>({...e,[re.productId]:!0}))}catch(e){ye(e.message||"Yorum g√∂nderilirken bir hata olu≈ütu","error")}finally{ue(!1)}}else ye("L√ºtfen 1-5 arasƒ± bir puan se√ßin","error")},disabled:me||!ie,style:{padding:"0.75rem 1.5rem",background:ie?"#000000":"#d1d5db",color:"white",border:"none",borderRadius:"8px",cursor:ie?"pointer":"not-allowed",fontWeight:"600",fontSize:"0.875rem",opacity:me?.6:1},children:me?"G√∂nderiliyor...":"Yorumu G√∂nder"})]})]})})]});var $e};export{d as default};
