import{e,u as s,a as i,r as a,d as t,j as r,L as l}from"./react-vendor-2SZXphvN.js";import{u as n,a as c}from"./context-Ch8ZyfUe.js";import{u as o}from"./index-h050gNYs.js";import{L as d}from"./LazyImage-ITWyV1Eq.js";import{S as m}from"./SEO-CLq8vwqd.js";/* empty css                           */import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const h="https://eticaret-5aic.onrender.com/api",p=()=>{const{id:p}=e();s();const{refreshCart:u}=n(),{accessToken:g}=c(),x=o(),j=i(),v=a.useRef(null),y=a.useRef(null),w=a.useRef(null),f=a.useRef(null),[N,k]=a.useState(1),[b,S]=a.useState(null),[C,F]=a.useState(!0),[T,E]=a.useState(!1),[z,M]=a.useState(""),[P,B]=a.useState(!1),[$,I]=a.useState(""),[R,A]=a.useState(""),[D,L]=a.useState("1x1"),[W,O]=a.useState(0),[U,Y]=a.useState(!1),[G,V]=a.useState(!1),[H,q]=a.useState(!0),[K,_]=a.useState([]),[J,X]=a.useState({en:"",boy:""}),[Q]=a.useState(0),[Z,ee]=a.useState([]),[se,ie]=a.useState(null),[ae,te]=a.useState({page:0,size:6,hasNext:!0,totalElements:0,totalPages:0}),[re,le]=a.useState(!1),[ne,ce]=a.useState("LATEST"),[oe,de]=a.useState(!1),[me,he]=a.useState(""),[pe,ue]=a.useState(!1),[ge,xe]=a.useState(null),[je,ve]=a.useState(null),[ye,we]=a.useState(!1),[fe,Ne]=a.useState(!1),[ke,be]=a.useState(0),[Se,Ce]=a.useState(!1),[Fe,Te]=a.useState({en:"",boy:"",pileSikligi:"1x1"}),[Ee,ze]=a.useState(0),[Me,Pe]=a.useState(!1),[Be,$e]=a.useState(!1),[Ie,Re]=a.useState({en:"",boy:""}),Ae=a.useMemo(()=>{if(!b)return[];const e=[];return b.image&&e.push(b.image),Array.isArray(b.detailImages)&&b.detailImages.filter(Boolean).forEach(s=>e.push(s)),e.filter(Boolean).filter((e,s,i)=>i.indexOf(e)===s)},[b]),De=Ae[Q]||Ae[0]||b?.image||"/images/perde1kapak.jpg",Le=Ae.length>1?Ae[1]:null,We=a.useMemo(()=>{if(!Z||0===Z.length)return[];const e=[];return Z.forEach(s=>{s.imageUrls&&Array.isArray(s.imageUrls)&&s.imageUrls.forEach(s=>{s&&e.push(s)})}),e},[Z]),Oe=a.useCallback(e=>{const s=We.findIndex(s=>s===e);-1!==s&&(be(s),Ne(!0),document.body.style.overflow="hidden")},[We]),Ue=a.useCallback(()=>{Ne(!1),document.body.style.overflow=""},[]),Ye=a.useCallback(()=>{be(e=>e>0?e-1:We.length-1)},[We.length]),Ge=a.useCallback(()=>{be(e=>e<We.length-1?e+1:0)},[We.length]);a.useEffect(()=>{if(!fe)return;const e=e=>{"Escape"===e.key?Ue():"ArrowLeft"===e.key?Ye():"ArrowRight"===e.key&&Ge()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[fe,Ue,Ye,Ge]);const Ve=a.useCallback((e,s)=>{e&&"function"==typeof e.stopPropagation&&e.stopPropagation();const i=f.current,a=w.current;if("undefined"==typeof window)ve(null);else if(i&&a){const e=i.getBoundingClientRect(),s=a.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop||0,r=window.pageXOffset||document.documentElement.scrollLeft||0,l=s.top+t,n=s.left+r;ve({top:e.top+t-l+.075*e.height,left:e.left+r-n+.075*e.width,width:.85*e.width,height:.85*e.height})}else ve(null);xe(s||Le||De),ue(!0),we(!0)},[De,Le]),He=a.useCallback(()=>{ue(!1),xe(null),ve(null),we(!1)},[]),qe=[{value:"1x1",label:"Pilesiz (1x1)"},{value:"1x2",label:"1x2"},{value:"1x3",label:"1x3"}],Ke=()=>{Ce(!1),Te({en:"",boy:"",pileSikligi:"1x1"}),ze(0),Re({en:"",boy:""})},_e=(e,s)=>{Te(i=>({...i,[e]:s})),Re(s=>{const i={...s};return delete i[e],i})},Je=a.useCallback(async()=>{const{en:e,boy:s,pileSikligi:i}=Fe;if(!(e&&s&&i&&b&&b.id))return void ze(0);const a=parseFloat(e),t=parseFloat(s);if(isNaN(a)||isNaN(t))ze(0);else{Pe(!0);try{const e=await fetch(`${h}/products/${b.id}/calculate-price`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({width:a,height:t,pleatType:i,price:b.price})});if(e.ok){const s=await e.json();if(s.isSuccess||s.success){const e=parseFloat(s.data.calculatedPrice);ze(isNaN(e)?0:e)}else{let e=1;try{const s=i.split("x");2===s.length&&(e=parseFloat(s[1]),isNaN(e)&&(e=1))}catch(r){e=1}const s=a/100,t="number"==typeof b.price?b.price:parseFloat(b.price)||0;ze(Math.round(t*s*e*100)/100)}}else{let e=1;try{const s=i.split("x");2===s.length&&(e=parseFloat(s[1]),isNaN(e)&&(e=1))}catch(r){e=1}const s=a/100,t="number"==typeof b.price?b.price:parseFloat(b.price)||0;ze(Math.round(t*s*e*100)/100)}}catch(l){let e=1;try{const s=i.split("x");2===s.length&&(e=parseFloat(s[1]),isNaN(e)&&(e=1))}catch(r){e=1}const s=a/100,t="number"==typeof b.price?b.price:parseFloat(b.price)||0;ze(Math.round(t*s*e*100)/100)}finally{Pe(!1)}}},[Fe,b]);a.useEffect(()=>{if(Fe.en&&Fe.boy&&Fe.pileSikligi&&b?.id){const e=setTimeout(()=>{Je()},500);return()=>clearTimeout(e)}ze(0)},[Fe,b?.id,Je]);const Xe=e=>{if(!e)return null;const s=e.trim();return s.startsWith("#")&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(s)?s:{beyaz:"#ffffff",white:"#ffffff",siyah:"#000000",black:"#000000",kahverengi:"#8B4513",brown:"#8B4513",krem:"#FFFDD0",cream:"#FFFDD0",bej:"#F5F5DC",beige:"#F5F5DC",gri:"#808080",gray:"#808080",grey:"#808080",mavi:"#0000FF",blue:"#0000FF","yeşil":"#008000",green:"#008000","kırmızı":"#FF0000",red:"#FF0000","sarı":"#FFFF00",yellow:"#FFFF00",turuncu:"#FFA500",orange:"#FFA500",pembe:"#FFC0CB",pink:"#FFC0CB",mor:"#800080",purple:"#800080",lacivert:"#000080",navy:"#000080",turkuaz:"#40E0D0",turquoise:"#40E0D0",bordo:"#800020",burgundy:"#800020"}[s.toLowerCase()]||s};a.useEffect(()=>{(async()=>{if(p)try{F(!0),S(null);const e="string"==typeof p?parseInt(p,10):p;if(isNaN(e))return void F(!1);const s=await fetch(`${h}/products/${e}`);if(s.ok){const i=await s.json();if(i.isSuccess||i.success){const s=i.data||i,a="number"==typeof s.price?s.price:parseFloat(s.price)||0;S({...s,id:s.id||e,name:s.name||"Ürün",price:a,image:s.coverImageUrl||s.image||"/images/perde1kapak.jpg",detailImages:s.detailImageUrl?Array.isArray(s.detailImageUrl)?s.detailImageUrl:[s.detailImageUrl]:[],inStock:(s.quantity||0)>0,category:s.category?.name||s.category||"Genel",mountingType:s.mountingType||"",material:s.material||"",lightTransmittance:s.lightTransmittance||"",pieceCount:s.pieceCount||null,usageArea:s.usageArea||"",color:s.color||"",reviewCount:s.reviewCount||0,averageRating:s.averageRating||0,viewCount:s.viewCount||0})}else S(null)}else s.status,S(null)}catch(e){S(null)}finally{F(!1)}else F(!1)})()},[p]),a.useEffect(()=>{b&&"#reviews"===j.hash&&(v.current&&!re&&Z.length>0||v.current&&!re)&&setTimeout(()=>{v.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)},[j.hash,b,re,Z.length]);const Qe=a.useCallback(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth",block:"start"})},[]),Ze=a.useCallback(e=>{if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("tr-TR")},[]),es=a.useCallback(async({page:e=0,reset:s=!1}={})=>{if(!b?.id)return Promise.resolve();le(!0),s&&he("");try{const i=new URLSearchParams({page:e.toString(),size:"6",sort:ne,withImagesOnly:oe?"true":"false"}),a=await fetch(`${h}/reviews/product/${b.id}/page?${i.toString()}`);if(!a.ok)throw Error("Yorumlar getirilemedi.");const t=await a.json();if(!t?.isSuccess&&!t?.success)throw Error(t?.message||"Yorumlar getirilemedi.");const r=t?.data||{};return ee(e=>s?r.items||[]:[...e,...r.items||[]]),ie(r.summary||null),te({page:r.page??e,size:r.size??6,hasNext:r.hasNext??!1,totalElements:r.totalElements??0,totalPages:r.totalPages??0}),Promise.resolve()}catch(i){return he(i.message||"Yorumlar yüklenirken bir hata oluştu."),Promise.reject(i)}finally{le(!1)}},[b?.id,ne,oe]);a.useEffect(()=>{b?.id&&(ee([]),ie(null),te(e=>({...e,page:0,hasNext:!0,totalElements:0,totalPages:0})),es({page:0,reset:!0}).then(()=>{"#reviews"===j.hash&&v.current&&setTimeout(()=>{v.current?.scrollIntoView({behavior:"smooth",block:"start"})},300)}).catch(()=>{"#reviews"===j.hash&&v.current&&setTimeout(()=>{v.current?.scrollIntoView({behavior:"smooth",block:"start"})},300)}))},[b?.id,ne,oe,es,j.hash]),a.useEffect(()=>{const e=y.current;if(!e||!ae.hasNext)return;const s=new IntersectionObserver(e=>{e[0]?.isIntersecting&&!re&&es({page:ae.page+1,reset:!1})},{rootMargin:"200px"});return s.observe(e),()=>s.disconnect()},[ae.hasNext,ae.page,re,es]),a.useEffect(()=>{(async()=>{try{const e=await fetch(h+"/products");if(e.ok){const s=await e.json();if(s.isSuccess||s.success){const e=(s.data||[]).map(e=>({id:e.id,name:e.name,price:e.price?parseFloat(e.price):0,image:e.coverImageUrl||"/images/perde1kapak.jpg",description:e.description||"",category:e.category?.name||"Genel",inStock:(e.quantity||0)>0}));_(e)}}}catch(e){}})()},[]);const ss=t.useCallback((e,s)=>{if(!b||!b.price)return void O(0);let i=1;try{const e=s.split("x");2===e.length&&(i=parseFloat(e[1]),isNaN(i)&&(i=1))}catch(r){i=1}const a=e/100,t="number"==typeof b.price?b.price:parseFloat(b.price)||0;O(Math.round(t*a*i*100)/100)},[b]),is=t.useCallback(async(e,s,i)=>{if(!(e&&s&&i&&b&&b.id))return void O(0);const a=parseFloat(e),t=parseFloat(s);if(!isNaN(a)&&!isNaN(t)&&a>0&&t>0){V(!0);try{const e=await fetch(`${h}/products/${b.id}/calculate-price`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({width:a,height:t,pleatType:i,price:b.price})});if(e.ok){const s=await e.json();if(s.isSuccess||s.success){const e=parseFloat(s.data.calculatedPrice);O(isNaN(e)?0:e)}else ss(a,i)}else ss(a,i)}catch(r){ss(a,i)}finally{V(!1)}}else O(0)},[b,ss]),as=(e,s)=>{if(!s||""===s.trim())return{isValid:!1,message:""};const i=parseFloat(s);if(isNaN(i))return{isValid:!1,message:"Lütfen geçerli bir sayı giriniz."};if("en"===e){if(50>i)return{isValid:!1,message:"Genişlik en az 50 cm olmalıdır."};if(i>1e3)return{isValid:!1,message:"Genişlik en fazla 1000 cm olabilir."}}else if("boy"===e){if(30>i)return{isValid:!1,message:"Yükseklik en az 30 cm olmalıdır."};if(i>270)return{isValid:!1,message:"Yükseklik en fazla 270 cm olabilir."}}return{isValid:!0,message:""}};a.useEffect(()=>{const e=as("en",$),s=as("boy",R);if(X({en:e.message,boy:s.message}),b&&b.id&&$&&R&&D&&e.isValid&&s.isValid){const e=setTimeout(()=>{is($,R,D)},500);return()=>clearTimeout(e)}O(0)},[$,R,D,b?.id,b?.price,is]);const ts=se?.totalReviewCount??b?.reviewCount??0,rs=se?.averageRating??b?.averageRating??0,ls=se?.imageReviewCount??0;a.useMemo(()=>{const e=se?.breakdown||{},s=[{label:"5",count:e.fiveStars||0},{label:"4",count:e.fourStars||0},{label:"3",count:e.threeStars||0},{label:"2",count:e.twoStars||0},{label:"1",count:e.oneStar||0}],i=s.reduce((e,s)=>e+s.count,0)||ts;return s.map(e=>({...e,percentage:i?Math.round(e.count/i*100):0}))},[se,ts]);const ns=a.useMemo(()=>b&&b.id&&b.name&&b.price?{"@context":"https://schema.org","@type":"Product",name:(b.name||"Ürün")+" - Perde Satış",description:(b.description||"")+" Perde satış için Hiedra'yı ziyaret edin. Kaliteli kumaş, uygun fiyat, hızlı teslimat.",image:b.image?b.image.startsWith("http")?b.image:`${"undefined"!=typeof window?window.location.origin:"https://hiedra.com"}${b.image}`:"/images/perde1kapak.jpg",sku:"PROD-"+b.id,mpn:"HIEDRA-"+b.id,category:(b.category||"Genel")+" Perde",brand:{"@type":"Brand",name:"Hiedra Perde"},manufacturer:{"@type":"Organization",name:"Hiedra Perde"},offers:{"@type":"Offer",url:"undefined"!=typeof window?window.location.href:"https://hiedra.com/product/"+b.id,priceCurrency:"TRY",price:("number"==typeof b.price?b.price:parseFloat(b.price)||0).toString(),priceValidUntil:new Date(Date.now()+31536e6).toISOString().split("T")[0],availability:b.inStock?"https://schema.org/InStock":"https://schema.org/OutOfStock",itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"Hiedra Perde"},priceSpecification:{"@type":"UnitPriceSpecification",priceCurrency:"TRY",price:("number"==typeof b.price?b.price:parseFloat(b.price)||0).toString(),unitCode:"MTR",unitText:"metre"}},aggregateRating:{"@type":"AggregateRating",ratingValue:(b.averageRating||rs||4.8).toString(),reviewCount:(b.reviewCount||ts||0).toString(),bestRating:"5",worstRating:"1"},review:b.reviewCount>0?[{"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:(b.averageRating||5).toString(),bestRating:"5"},author:{"@type":"Person",name:"Müşteri"},reviewBody:(b.name||"Ürün")+" ürünü kaliteli ve hızlı teslimat ile memnun kaldık."}]:[]}:null,[b]);return t.useCallback(async e=>{if(e.preventDefault(),M(""),B(!1),!$||!R)return void M("Lütfen en ve boy değerlerini giriniz.");const s=parseFloat($),i=parseFloat(R);if(isNaN(s)||isNaN(i))M("Lütfen geçerli sayısal değerler giriniz.");else if(50>s||s>1e3)M("Genişlik değeri 50 ile 1000 cm arasında olmalıdır.");else if(30>i||i>270)M("Yükseklik değeri 30 ile 270 cm arasında olmalıdır.");else if(b&&b.id){E(!0);try{let e=null;g||(e=localStorage.getItem("guestUserId"),e||(e="guest_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("guestUserId",e)));const a=await fetch(`${h}/cart/items${e?"?guestUserId="+e:""}`,{method:"POST",headers:{"Content-Type":"application/json",...g&&{Authorization:"Bearer "+g}},body:JSON.stringify({productId:b.id,quantity:N,width:s,height:i,pleatType:D})}),t=await a.json();if(!a.ok||!t.isSuccess&&!t.success)throw Error(t.message||"Ürün sepete eklenemedi");u&&await u(),B(!0)}catch(a){M(a.message||"Ürün sepete eklenirken bir hata oluştu. Lütfen tekrar deneyin.")}finally{E(!1)}}else M("Ürün bilgisi bulunamadı.")},[b,N,$,R,D,W,g,u]),C?r.jsx("div",{className:"product-detail-container",children:r.jsxs("div",{className:"loading-state",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Ürün bilgileri yükleniyor..."})]})}):b?r.jsxs("div",{className:"product-detail-container",children:[b&&r.jsx(m,{title:`${b.name} - ${b.category} Perde Satış | Fiyat: ${b.price} ₺`,description:`${b.description} ${b.category} perde satış için en uygun fiyat: ${b.price} ₺. Kaliteli kumaş, hızlı teslimat. Perde satın al.`,keywords:`${b.name}, ${b.category} perde satış, ${b.category.toLowerCase()} perde, perde satış, online perde satış, ${b.price} TL perde, kaliteli perde`,image:b.image,url:"/product/"+b.id,type:"product",structuredData:ns}),b&&r.jsxs("div",{className:"product-detail-wrapper",ref:w,children:[r.jsx("div",{className:"product-category-top",children:r.jsx("span",{className:"product-category-top-text",children:b.category||"Genel"})}),r.jsx("div",{className:"product-name-top",children:r.jsx("h1",{className:"product-name-top-text",children:b.name})}),r.jsxs("div",{className:"product-detail-content",children:[r.jsxs("section",{className:"product-detail-images",children:[r.jsxs("div",{className:"product-image-section-home",children:[r.jsx("div",{className:"product-image-wrapper",children:r.jsxs("div",{className:"main-product-image-wrapper-home fade-in "+(ye?"detail-modal-blurred":""),ref:f,children:[r.jsx(d,{src:De,alt:`${b.name} - ${b.category} perde modeli - Görsel ${Q+1}`,className:"main-product-image-home",isLCP:!0,fetchPriority:"high",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 800px",width:800,height:800}),Le&&r.jsx("div",{className:"detail-image-preview-home",onClick:e=>Ve(e,Le),title:"Detay fotoğrafını görüntüle",children:r.jsx(d,{src:Le,alt:b.name+" detay fotoğrafı",className:"detail-image-preview-img-home"})})]})}),r.jsx("div",{className:"product-actions-home",children:r.jsxs("button",{className:"open-pricing-modal-btn-home",onClick:()=>{Te({en:"",boy:"",pileSikligi:"1x1"}),ze(0),Re({en:"",boy:""}),Ce(!0)},children:[r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"9",cy:"21",r:"1"}),r.jsx("circle",{cx:"20",cy:"21",r:"1"}),r.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Sepete Ekle"]})}),Se&&b&&r.jsx("div",{className:"pricing-modal-overlay-home",onClick:Ke,children:r.jsxs("div",{className:"pricing-modal-content-home",onClick:e=>e.stopPropagation(),children:[r.jsx("button",{className:"pricing-modal-close-home",onClick:Ke,"aria-label":"Kapat",children:r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),r.jsxs("div",{className:"pricing-modal-header-home",children:[r.jsx("h3",{className:"pricing-modal-title-home",children:"Özel Fiyatlandırma"}),r.jsx("p",{className:"pricing-modal-subtitle-home",children:b.name})]}),r.jsxs("div",{className:"pricing-modal-form-home",children:[r.jsxs("div",{className:"measurement-inputs-home",children:[r.jsxs("div",{className:"measurement-input-group-home",children:[r.jsxs("label",{htmlFor:"modal-en",children:["Genişlik (cm) ",r.jsx("span",{className:"required",children:"*"}),r.jsx("span",{className:"form-hint",children:"Min: 50 cm, Max: 1000 cm"})]}),r.jsx("input",{id:"modal-en",type:"number",min:"50",max:"1000",step:"0.1",placeholder:"Örn: 200",value:Fe.en||"",onChange:e=>_e("en",e.target.value),className:"measurement-input-home "+(Ie.en?"input-error":""),required:!0}),Ie.en&&r.jsx("span",{className:"error-message-home",children:Ie.en})]}),r.jsxs("div",{className:"measurement-input-group-home",children:[r.jsxs("label",{htmlFor:"modal-boy",children:["Yükseklik (cm) ",r.jsx("span",{className:"required",children:"*"}),r.jsx("span",{className:"form-hint",children:"Min: 30 cm, Max: 270 cm"})]}),r.jsx("input",{id:"modal-boy",type:"number",min:"30",max:"270",step:"0.1",placeholder:"Örn: 250",value:Fe.boy||"",onChange:e=>_e("boy",e.target.value),className:"measurement-input-home "+(Ie.boy?"input-error":""),required:!0}),Ie.boy&&r.jsx("span",{className:"error-message-home",children:Ie.boy})]}),r.jsxs("div",{className:"measurement-input-group-home",children:[r.jsxs("label",{htmlFor:"modal-pile",children:["Pile Sıklığı ",r.jsx("span",{className:"required",children:"*"})]}),r.jsxs("div",{className:"custom-dropdown-home",children:[r.jsxs("button",{type:"button",className:"dropdown-trigger-home",onClick:()=>$e(!Be),onBlur:()=>setTimeout(()=>$e(!1),200),children:[r.jsx("span",{className:"dropdown-selected-home",children:qe.find(e=>e.value===(Fe.pileSikligi||"1x1"))?.label||qe[0].label}),r.jsx("svg",{className:"dropdown-arrow-home "+(Be?"open":""),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),Be&&r.jsx("div",{className:"dropdown-menu-home",children:qe.map(e=>r.jsx("button",{type:"button",className:"dropdown-option-home",onClick:()=>{_e("pileSikligi",e.value),$e(!1)},children:e.label},e.value))})]})]})]}),Me&&r.jsx("div",{className:"price-calculating-home",children:r.jsx("span",{children:"Fiyat hesaplanıyor..."})}),Ee>0&&r.jsx("div",{className:"calculated-price-section-home",children:r.jsxs("div",{className:"price-breakdown-home",children:[r.jsx("span",{children:"Toplam Fiyat:"}),r.jsxs("span",{className:"price-value-home",children:[Ee.toFixed(2)," ₺"]})]})}),Ie.general&&r.jsx("div",{className:"error-message-home",style:{marginTop:"1rem"},children:Ie.general}),r.jsx("button",{className:"add-to-cart-btn-home",onClick:async()=>{const{en:e,boy:s,pileSikligi:i}=Fe;if(!e||!s)return Re({en:"Lütfen genişlik giriniz.",boy:"Lütfen yükseklik giriniz."}),void x.warning("Lütfen en ve boy değerlerini girin!");const a=parseFloat(e),t=parseFloat(s);if(isNaN(a)||isNaN(t))return Re({en:"Geçerli sayı giriniz.",boy:"Geçerli sayı giriniz."}),void x.warning("Lütfen geçerli sayısal değerler giriniz.");if(50>a||a>1e3)return Re(e=>({...e,en:"Genişlik 50-1000 cm arasında olmalıdır."})),void x.warning("Genişlik değeri 50 ile 1000 cm arasında olmalıdır.");if(30>t||t>270)return Re(e=>({...e,boy:"Yükseklik 30-270 cm arasında olmalıdır."})),void x.warning("Yükseklik değeri 30 ile 270 cm arasında olmalıdır.");if(b&&b.id){E(!0);try{let e=null;g||(e=localStorage.getItem("guestUserId"),e||(e="guest_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("guestUserId",e)));const s=await fetch(`${h}/cart/items${e?"?guestUserId="+e:""}`,{method:"POST",headers:{"Content-Type":"application/json",...g&&{Authorization:"Bearer "+g}},body:JSON.stringify({productId:b.id,quantity:1,width:a,height:t,pleatType:i})}),r=await s.json();if(!s.ok||!r.isSuccess&&!r.success)throw Error(r.message||"Ürün sepete eklenemedi");u&&await u(),x.success("Ürün sepete başarıyla eklendi!"),Ke()}catch(r){const e=r.message||"Sepete eklenirken hata oluştu.";Re(s=>({...s,general:e})),x.error(e)}finally{E(!1)}}else x.error("Ürün bilgisi bulunamadı.")},disabled:!Fe.en||!Fe.boy||!!Ie.en||!!Ie.boy||T,children:T?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"spinner",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite",marginRight:"0.5rem"},children:r.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),"Ekleniyor..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"9",cy:"21",r:"1"}),r.jsx("circle",{cx:"20",cy:"21",r:"1"}),r.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Sepete Ekle"]})})]})]})})]}),b.description&&r.jsxs("div",{className:"product-description-section-detail",children:[r.jsx("h3",{className:"product-description-title",children:"Ürün Açıklaması"}),r.jsx("p",{className:"product-description-text",children:b.description})]}),(b.mountingType||b.material||b.lightTransmittance||b.pieceCount||b.color||b.usageArea||b.pleatType||b.width&&b.height)&&r.jsxs("div",{className:"product-specifications-detail",children:[r.jsx("h3",{className:"specifications-title-detail",children:"Ürün Özellikleri"}),r.jsxs("div",{className:"specifications-grid-detail",children:[b.mountingType&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Takma Şekli"}),r.jsx("span",{className:"spec-value-detail",children:b.mountingType})]})]}),b.material&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),r.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),r.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Materyal"}),r.jsx("span",{className:"spec-value-detail",children:b.material})]})]}),b.pleatType&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("path",{d:"M3 12h18M3 6h18M3 18h18"})})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Pile"}),r.jsx("span",{className:"spec-value-detail",children:b.pleatType})]})]}),b.lightTransmittance&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"5"}),r.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),r.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),r.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),r.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),r.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),r.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),r.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),r.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Işık Geçirgenliği"}),r.jsx("span",{className:"spec-value-detail",children:b.lightTransmittance})]})]}),b.pieceCount&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),r.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),r.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),r.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Parça Sayısı"}),r.jsxs("span",{className:"spec-value-detail",children:[b.pieceCount," Adet"]})]})]}),b.color&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M12 2v4M12 18v4M2 12h4M18 12h4"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Renk"}),r.jsx("div",{className:"spec-color-display-detail",children:r.jsx("div",{className:"color-swatch-detail",style:{backgroundColor:Xe(b.color)||"#ccc",border:"2px solid "+(Xe(b.color)||"#ccc")},title:b.color})})]})]}),b.width&&b.height&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Beden"}),r.jsxs("span",{className:"spec-value-detail",children:[b.width," x ",b.height," cm"]})]})]}),b.usageArea&&r.jsxs("div",{className:"spec-item-detail",children:[r.jsx("div",{className:"spec-icon-wrapper-detail",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),r.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),r.jsxs("div",{className:"spec-content-detail",children:[r.jsx("span",{className:"spec-label-detail",children:"Kullanım Alanı"}),r.jsx("span",{className:"spec-value-detail",children:b.usageArea})]})]})]})]})]}),r.jsxs("article",{className:"product-detail-info",children:[r.jsxs("div",{className:"product-header-info",children:[b.productCode&&r.jsxs("span",{className:"product-code",children:["Ürün Kodu: ",r.jsx("strong",{children:b.productCode})]}),ts>0&&r.jsxs("div",{className:"product-rating-section",children:[r.jsxs("div",{className:"rating-stars",children:[[1,2,3,4,5].map(e=>{const s=Math.floor(rs||0)>=e;return r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:s?"#FFD700":"none",stroke:s?"#FFD700":"#ddd",strokeWidth:"2",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},e)}),rs>0&&r.jsx("span",{className:"rating-value",children:rs.toFixed(1)})]}),r.jsxs("span",{className:"review-count",children:["(",ts," ","yorum",")"]}),r.jsx("button",{type:"button",className:"reviews-anchor-btn",onClick:Qe,children:"Yorumları Gör"})]}),r.jsx("div",{className:"detail-price-section-top",children:r.jsxs("div",{className:"price-info-top",children:[r.jsx("span",{className:"price-label-top",children:"Metre Fiyatı:"}),r.jsxs("span",{className:"detail-price-top",children:[b.price.toFixed(2)," ₺"]})]})})]}),r.jsxs("div",{className:"product-features",children:[r.jsxs("div",{className:"feature-item",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),r.jsx("span",{children:"Kaliteli Kumaş"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),r.jsx("span",{children:"Hızlı Teslimat"})]}),r.jsxs("div",{className:"feature-item",children:[r.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),r.jsx("span",{children:"Uygun Fiyat"})]})]})]})]}),pe&&ge&&r.jsx("div",{className:"detail-modal-overlay-home",onClick:He,children:r.jsxs("div",{className:"detail-modal-content-home",onClick:e=>e.stopPropagation(),style:je?{position:"absolute",top:je.top+"px",left:je.left+"px",width:je.width+"px",height:je.height+"px"}:{},children:[r.jsx("button",{className:"detail-modal-close-home",onClick:He,"aria-label":"Kapat",children:r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),r.jsx(d,{src:ge,alt:"Ürün detay",className:"detail-modal-image-home"})]})})]}),b&&(()=>{const e=K.filter(e=>e.id!==b.id&&e.category===(b.category||"Genel"));return 0===e.length?null:r.jsxs("section",{className:"similar-products-widget",children:[r.jsxs("div",{className:"similar-products-header",children:[r.jsx("h2",{className:"similar-products-title",children:"Benzer Ürünler"}),r.jsxs("p",{className:"similar-products-subtitle",children:[b.category||"Genel"," kategorisindeki diğer ürünler"]})]}),r.jsx("div",{className:"similar-products-scroll-container",children:r.jsx("div",{className:"similar-products-scroll",children:e.map(e=>r.jsxs(l,{to:"/product/"+e.id,className:"similar-product-item",children:[r.jsx("div",{className:"similar-product-image-wrapper",children:r.jsx(d,{src:e.image,alt:e.name,className:"similar-product-image"})}),r.jsx("div",{className:"similar-product-name",children:e.name})]},e.id))})})]})})(),b&&r.jsxs("section",{id:"reviews-section",ref:v,className:"product-reviews-section",children:[r.jsx("div",{className:"reviews-header",children:r.jsx("h2",{className:"reviews-title",children:"Ürün Yorumları"})}),r.jsxs("div",{className:"reviews-summary-card",children:[r.jsxs("div",{className:"reviews-score",children:[r.jsx("span",{className:"reviews-score-value",children:(rs||0).toFixed(1)}),r.jsx("span",{className:"reviews-score-max",children:"/ 5"}),r.jsx("span",{className:"reviews-score-text",children:"puan"}),r.jsx("div",{className:"reviews-score-stars",children:[1,2,3,4,5].map(e=>r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:e>Math.round(rs)?"none":"#FFD700",stroke:e>Math.round(rs)?"#ddd":"#FFD700",strokeWidth:"2",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},"summary-star-"+e))})]}),r.jsxs("div",{className:"reviews-meta",children:[r.jsx("span",{className:"reviews-count-text",children:ts>0?ts+" değerlendirme":"Henüz yorum bulunmuyor"}),ls>0&&r.jsxs("span",{className:"reviews-image-count",children:[ls," fotoğraflı yorum"]})]})]}),r.jsx("div",{className:"reviews-summary-extras",children:r.jsxs("div",{className:"reviews-filters",children:[r.jsx("label",{className:"reviews-sort-label",htmlFor:"review-sort-select",children:"Sırala"}),r.jsxs("select",{id:"review-sort-select",className:"reviews-sort-select",value:ne,onChange:e=>ce(e.target.value),children:[r.jsx("option",{value:"LATEST",children:"En Yeni"}),r.jsx("option",{value:"OLDEST",children:"En Eski"}),r.jsx("option",{value:"HIGHEST_RATED",children:"En Yüksek Puan"}),r.jsx("option",{value:"LOWEST_RATED",children:"En Düşük Puan"}),r.jsx("option",{value:"MOST_HELPFUL",children:"En Faydalı"})]}),r.jsxs("label",{className:"reviews-checkbox",children:[r.jsx("input",{type:"checkbox",checked:oe,onChange:e=>de(e.target.checked)}),r.jsxs("span",{children:["Sadece görselli (",ls,")"]})]})]})}),me&&r.jsx("div",{className:"reviews-error",children:me}),re&&0===Z.length?r.jsx("div",{className:"reviews-loading",children:"Yorumlar yükleniyor..."}):Z.length>0?r.jsxs("div",{className:"reviews-list",children:[Z.map((e,s)=>{const i=+e.rating||0,a=Ze(e.createdAt||e.updatedAt),t=e.reviewer||{},l=e.id??`${s}-${t.email||"review"}`;return r.jsxs("article",{className:"review-card",children:[r.jsxs("div",{className:"review-card-header",children:[r.jsxs("div",{className:"review-author-meta",children:[r.jsx("span",{className:"review-author",children:t.name||"Müşteri"}),a&&r.jsx("time",{className:"review-date",children:a})]}),i>0&&r.jsxs("div",{className:"review-card-rating",children:[[1,2,3,4,5].map(s=>r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:s>Math.round(i)?"none":"#FFD700",stroke:s>Math.round(i)?"#ddd":"#FFD700",strokeWidth:"2",children:r.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},`${e.id}-${s}`)),r.jsx("span",{children:i.toFixed(1)})]})]}),e.comment&&r.jsx("p",{className:"review-comment",children:e.comment}),e.imageUrls&&e.imageUrls.length>0&&r.jsx("div",{className:"review-image-grid",children:e.imageUrls.map((s,i)=>r.jsx("div",{className:"review-image-thumb","aria-label":"Yorum görseli "+(i+1),onClick:()=>Oe(s),style:{cursor:"pointer"},children:r.jsx(d,{src:s,alt:"Yorum görseli "+(i+1)})},`${e.id}-img-${i}`))})]},l)}),r.jsxs("div",{className:"reviews-load-more",ref:y,children:[re&&Z.length>0&&r.jsx("span",{children:"Daha fazla yorum yükleniyor..."}),!ae.hasNext&&Z.length>0&&r.jsx("span",{})]})]}):r.jsxs("div",{className:"no-reviews-card",children:[r.jsx("p",{children:oe?"Fotoğraflı yorum bulunamadı.":"Bu ürün için henüz yorum paylaşılmadı."}),r.jsx("span",{children:"Satın alma sonrasında deneyiminizi paylaşarak diğer müşterilere destek olabilirsiniz."})]})]}),fe&&We.length>0&&r.jsxs("div",{className:"review-image-modal-overlay",onClick:Ue,children:[r.jsx("button",{className:"review-image-modal-close",onClick:Ue,"aria-label":"Kapat",children:r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),We.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"review-image-modal-nav review-image-modal-prev",onClick:e=>{e.stopPropagation(),Ye()},"aria-label":"Önceki görsel",children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"15 18 9 12 15 6"})})}),r.jsx("button",{className:"review-image-modal-nav review-image-modal-next",onClick:e=>{e.stopPropagation(),Ge()},"aria-label":"Sonraki görsel",children:r.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),r.jsxs("div",{className:"review-image-modal-content",onClick:e=>e.stopPropagation(),children:[r.jsx(d,{src:We[ke],alt:`Yorum görseli ${ke+1} / ${We.length}`,className:"review-image-modal-image"}),We.length>1&&r.jsxs("div",{className:"review-image-modal-counter",children:[ke+1," / ",We.length]})]})]})]}):r.jsx("div",{className:"product-detail-container",children:r.jsxs("div",{className:"product-not-found",children:[r.jsx("h2",{children:"Ürün bulunamadı"}),r.jsx("p",{children:"Aradığınız ürün mevcut değil veya silinmiş olabilir."}),r.jsx(l,{to:"/",className:"back-to-home-btn",children:"Ana Sayfaya Dön"})]})})};export{p as default};
