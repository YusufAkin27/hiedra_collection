import{u as e,r as s,j as n}from"./react-vendor-2SZXphvN.js";import{a as i}from"./context-DXDbei_0.js";import{L as a}from"./LazyImage-CYh-si_0.js";import{L as r}from"./index-DRjqN31K.js";import{S as l}from"./SEO-CLq8vwqd.js";import"./vendor-invariant-BME_2b6A.js";import"./vendor-shallowequal-CcIhOdxx.js";import"./vendor-scheduler-BVKd3TJG.js";import"./vendor-@remix-run-BWfEV5os.js";const o=()=>{const o=e(),[t,c]=s.useState([]),[d,p]=s.useState(!0),[u,h]=s.useState(""),[m,x]=s.useState(null);let j;try{j=i()}catch(f){j={accessToken:null}}const{accessToken:v}=j||{accessToken:null};s.useEffect(()=>{k()},[v]);const k=async()=>{try{p(!0),h("");const e={"Content-Type":"application/json"};v&&(e.Authorization="Bearer "+v);const s=await fetch("https://api.yusufakin.com.tr/api/coupons",{headers:e});if(!s.ok){const e=await s.text();let n;try{n=JSON.parse(e)}catch{n={message:`HTTP ${s.status}: ${s.statusText}`}}return h(n.message||"Kuponlar yüklenemedi"),void p(!1)}const n=s.headers.get("content-type");if(n&&n.includes("application/json")){const e=await s.json();e.isSuccess||e.success?c(e.data||[]):h(e.message||"Kuponlar yüklenemedi")}else h("Beklenmeyen yanıt formatı")}catch(e){e.message&&e.message.includes("Failed to fetch")?h("Sunucuya bağlanılamadı. Lütfen internet bağlantınızı kontrol edin."):h("Kuponlar yüklenirken bir hata oluştu: "+(e.message||"Bilinmeyen hata"))}finally{p(!1)}},y=e=>"YUZDE"===e.type?"%"+e.discountValue:"SABIT_TUTAR"===e.type?e.discountValue+" ₺":""+e.discountValue,g={"@context":"https://schema.org","@type":"WebPage",name:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın. Özel indirimler ve kampanyalar.",url:"undefined"!=typeof window?window.location.href:"https://hiedra.com/kuponlar"};return d?n.jsxs("div",{className:"coupons-container",children:[n.jsx(l,{title:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın.",url:"/kuponlar"}),n.jsx(r,{size:"large",text:"Kuponlar yükleniyor...",variant:"page"})]}):n.jsxs("div",{className:"coupons-container",children:[n.jsx(l,{title:"Kuponlar - Geçerli İndirim Kuponları | Hiedra Perde",description:"Geçerli indirim kuponlarını görüntüleyin ve alışverişinizde kullanın. Özel indirimler ve kampanyalar.",keywords:"kupon, indirim kuponu, kupon kodu, perde indirimi, kampanya, özel fırsat",url:"/kuponlar",structuredData:g}),u&&n.jsxs("div",{className:"error-message",children:[n.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),n.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),n.jsx("span",{children:u})]}),!u&&0===t.length&&n.jsxs("div",{className:"no-coupons",children:[n.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"}),n.jsx("path",{d:"M9 9h6M9 15h6"})]}),n.jsx("h2",{children:"Şu anda geçerli kupon bulunmuyor"}),n.jsx("p",{children:"Yeni kampanyalar ve özel fırsatlar için bizi takip edin!"}),n.jsx("button",{className:"back-to-shop-btn",onClick:()=>o("/"),children:"Alışverişe Dön"})]}),!u&&t.length>0&&n.jsx("div",{className:"coupons-grid",children:t.map(e=>{const s=(e=>{if(!e)return null;const s=Math.ceil((new Date(e)-new Date)/864e5);return s>0?s:0})(e.validUntil),i=null!==s&&7>=s&&s>0,r=!0===e.isPersonal;return n.jsxs("div",{className:"coupon-card-simple "+(r?"personal-coupon":""),onClick:()=>o("/kupon/"+e.id),children:[e.coverImageUrl?n.jsxs("div",{className:"coupon-cover-image-simple",children:[n.jsx(a,{src:e.coverImageUrl,alt:e.name}),r&&n.jsxs("div",{className:"personal-badge-simple",children:[n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),n.jsx("span",{children:"Size Özel"})]}),i&&n.jsxs("div",{className:"expiring-badge-simple",children:[n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("polyline",{points:"12 6 12 12 16 14"})]}),n.jsx("span",{children:"Yakında bitiyor"})]}),n.jsx("div",{className:"coupon-overlay",children:n.jsxs("div",{className:"coupon-discount-overlay",children:[n.jsx("span",{className:"discount-value-overlay",children:y(e)}),n.jsx("span",{className:"discount-label-overlay",children:"İndirim"})]})})]}):n.jsxs("div",{className:"coupon-header-simple",children:[n.jsxs("div",{className:"coupon-discount-badge-simple",children:[n.jsx("span",{className:"discount-value-simple",children:y(e)}),n.jsx("span",{className:"discount-label-simple",children:"İndirim"})]}),r&&n.jsxs("div",{className:"personal-badge-header-simple",children:[n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),n.jsx("span",{children:"Size Özel"})]}),i&&n.jsxs("div",{className:"expiring-badge-header-simple",children:[n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("polyline",{points:"12 6 12 12 16 14"})]}),n.jsx("span",{children:"Yakında bitiyor"})]})]}),n.jsx("div",{className:"coupon-body-simple",children:n.jsx("h3",{className:"coupon-name-simple",children:e.name})})]},e.id)})})]})};export{o as default};
